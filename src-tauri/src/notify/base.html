<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <script type="module">
            const { path, tauri: { invoke, convertFileSrc } } = window === window.top ? window.__TAURI__ : window.top.__TAURI__

            window.config = JSON.parse(localStorage.getItem("config"))
            window.addEventListener("storage", event => event.key === "config" ? window.config = JSON.parse(event.newValue) : null)
            
            window.path = path
            window.invoke = invoke
            window.convertFileSrc = convertFileSrc

            async function SetBaseSrc(ext) {
                return !config.filesystem ? `./base.${ext}` : convertFileSrc(await path.join(await path.resourceDir(),"src","notify",`base.${ext}`))
            }

            const link = document.createElement("link")
            link.rel = "stylesheet"
            link.href = await SetBaseSrc("css")

            document.head.appendChild(link)

            const script = document.createElement("script")
            script.defer = true
            script.src = await SetBaseSrc("js")
            script.addEventListener("load", () => invoke("ipc", { eventname: "webviewready", payload: {} }, { once: true }))
            
            document.head.appendChild(script)
        </script>
    </head>
    <body>
        <audio src=""></audio>
        <div class="screenshotwrapper">
            <img src="" alt="">
        </div>
        <div class="mainwrapper"></div>
    </body>
</html>